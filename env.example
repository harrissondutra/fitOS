# FitOS - Estrutura de Arquivos de Ambiente Simplificada
# 
# ESTRUTURA:
# - src/backend/.env     -> Configurações do backend (desenvolvimento)
# - src/frontend/.env.local -> Configurações do frontend (desenvolvimento)
# - env.example          -> Este arquivo (exemplo para produção)
#
# Para produção, configure as variáveis no Dokploy/Coolify

# ===========================================
# BACKEND CONFIGURATION (src/backend/.env)
# ===========================================

# Database
DATABASE_URL=postgresql://user:password@host:port/database?sslmode=disable
DATABASE_HOST=your-database-host
DATABASE_PORT=5432
DATABASE_NAME=your-database-name
DATABASE_USER=your-database-user
DATABASE_PASSWORD=your-database-password

# Redis
REDIS_URL=redis://user:password@host:port
REDIS_HOST=your-redis-host
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0

# JWT
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d

# Email
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-app-password
EMAIL_FROM=your-email@gmail.com

# CORS (desenvolvimento + produção)
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,https://yourdomain.com

# Server
PORT_BACKEND=3001
PORT_FRONTEND=3000
NODE_ENV=development

# Multi-tenant
DEFAULT_DOMAIN=localhost:3000
SUBDOMAIN_PATTERN=*.localhost:3000
DEFAULT_TENANT_ID=default-tenant

# Better Auth (OBRIGATÓRIAS)
BETTER_AUTH_BASE_URL=http://localhost:3001
BETTER_AUTH_SECRET=your-super-secret-better-auth-key-minimum-32-characters
TRUSTED_ORIGINS=http://localhost:3000,http://localhost:3001,https://yourdomain.com

# Development flags
ENABLE_DEBUG_LOGS=true
ENABLE_SWAGGER=true
ENABLE_GRAPHQL_PLAYGROUND=true

# ===========================================
# COST TRACKING - REDIS CACHE (TTLs específicos por categoria)
# ===========================================
# Nota: REDIS_KEY_PREFIX=fitos: já existe, usar para costs como: fitos:costs:
COST_CACHE_TTL_CLOUDINARY=7200         # 2 horas (mais tempo que o default)
COST_CACHE_TTL_DATABASE=1800           # 30 minutos
COST_CACHE_TTL_DASHBOARD=300           # 5 minutos (menor que o default)

# ===========================================
# COST TRACKING - PRICING (sem hardcode)
# ===========================================
COST_DATABASE_PER_GB=0.10              # USD por GB/mês
COST_CLOUDINARY_FREE_CREDITS=25        # Créditos grátis/mês
COST_CLOUDINARY_PER_CREDIT=0.0018      # USD por crédito extra
COST_BANDWIDTH_PER_GB=0.08             # USD por GB bandwidth
COST_AI_GPT4_INPUT_PER_1K=0.03         # USD por 1k tokens input
COST_AI_GPT4_OUTPUT_PER_1K=0.06        # USD por 1k tokens output
COST_AI_GPT35_INPUT_PER_1K=0.001       # USD por 1k tokens input
COST_AI_GPT35_OUTPUT_PER_1K=0.002      # USD por 1k tokens output
COST_AI_CLAUDE_INPUT_PER_1K=0.003      # USD por 1k tokens input
COST_AI_CLAUDE_OUTPUT_PER_1K=0.015     # USD por 1k tokens output

# ===========================================
# AI PROVIDERS (MOCK para desenvolvimento)
# ===========================================
OPENAI_API_KEY=sk-mock-development-key
OPENAI_ORGANIZATION_ID=org-mock-development
ANTHROPIC_API_KEY=sk-ant-mock-development
GOOGLE_AI_API_KEY=mock-google-ai-development

# ===========================================
# AWS COST TRACKING (MOCK, desabilitado)
# ===========================================
AWS_ACCESS_KEY_ID=MOCK_DEV_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=mock_dev_secret_key
AWS_REGION=us-east-1
AWS_COST_EXPLORER_ENABLED=false
AWS_S3_BUCKET=mock-bucket-name

# ===========================================
# STRIPE & MERCADO PAGO (MOCK)
# ===========================================
STRIPE_SECRET_KEY=sk_test_mock_development
STRIPE_WEBHOOK_SECRET=whsec_mock_development
MERCADOPAGO_ACCESS_TOKEN=APP_USR_mock_development
COST_STRIPE_FEE_PERCENTAGE=2.9         # %
COST_STRIPE_FEE_FIXED=0.30             # USD
COST_MERCADOPAGO_PIX_FEE=2.99          # %
COST_MERCADOPAGO_CARD_FEE=3.99         # %

# ===========================================
# COST TRACKING - AUTOMATION
# ===========================================
COST_TRACKING_ENABLED=true
COST_TRACKING_INTERVAL=3600000         # 1 hora (ms)
COST_AUTO_SYNC_CLOUDINARY=true
COST_AUTO_SYNC_AWS=false               # Desabilitado em dev
COST_AUTO_SYNC_DATABASE=true
COST_PREDICTIVE_ANALYSIS_ENABLED=true
COST_ANOMALY_DETECTION_THRESHOLD=30    # % de variação

# ===========================================
# COST TRACKING - NOTIFICATIONS
# ===========================================
# Nota: COST_ALERT_EMAIL_ENABLED e COST_REPORT_SCHEDULE_ENABLED já existem
COST_ALERT_EMAIL_TO=admin@sistudo.com
COST_REPORT_SCHEDULE_CRON=0 0 * * 0    # Todo domingo às 00:00

# ===========================================
# WEBHOOKS RATE LIMITING
# ===========================================
WEBHOOK_RATE_LIMIT=100                 # Max requests por IP por minuto
RATE_LIMIT_WINDOW=60                   # Janela em segundos

# ===========================================
# NOTIFICATION CHANNELS (GRATUITAS)
# ===========================================
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK
CUSTOM_WEBHOOK_URL=https://your-custom-webhook.com/endpoint

# ===========================================
# CURRENCY CONVERSION (GRATUITA)
# ===========================================
CURRENCY_CONVERSION_ENABLED=true
CURRENCY_API_URL=https://api.exchangerate-api.com/v4/latest/USD
CURRENCY_CACHE_TTL=3600                # 1 hora

# ===========================================
# COST MANAGEMENT - EXISTING VARIABLES (REUTILIZAR)
# ===========================================
# Estas variáveis já existem, não duplicar:
# COST_REDIS_CACHE_ENABLED=true
# COST_CACHE_TTL=3600
# COST_ALERT_EMAIL_ENABLED=true
# COST_REPORT_SCHEDULE_ENABLED=true
# COST_DEFAULT_CURRENCY=BRL
# COST_ALERT_WARNING_THRESHOLD=75
# COST_ALERT_CRITICAL_THRESHOLD=90

# ===========================================
# FRONTEND CONFIGURATION (src/frontend/.env.local)
# ===========================================

# API
NEXT_PUBLIC_API_URL=http://localhost:3001

# App
NEXT_PUBLIC_APP_NAME=FitOS
NEXT_PUBLIC_APP_VERSION=1.0.0

# Environment
NODE_ENV=development

# ===========================================
# WHATSAPP - CONFIGURAÇÃO CENTRAL ÚNICA
# ===========================================
# Nota: Estas variáveis são usadas como fallback
# A configuração principal vem do banco (WhatsAppConfig)
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your_auth_token
WHATSAPP_FROM_NUMBER=+14155238886
API_BASE_URL=http://localhost:3001

# Cache de configuração WhatsApp (segundos)
WHATSAPP_CONFIG_CACHE_TTL=300

# ===========================================
# PRODUCTION OVERRIDES (Dokploy/Coolify)
# ===========================================
# Para produção, configure estas variáveis no seu provedor de deploy:

# NODE_ENV=production
# NEXT_PUBLIC_API_URL=https://yourdomain.com
# BETTER_AUTH_BASE_URL=https://yourdomain.com
# TRUSTED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
# CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
# DEFAULT_DOMAIN=yourdomain.com
# SUBDOMAIN_PATTERN=*.yourdomain.com
