# FitOS - Estrutura de Arquivos de Ambiente Simplificada
# 
# ESTRUTURA:
# - src/backend/.env     -> Configura√ß√µes do backend (desenvolvimento)
# - src/frontend/.env.local -> Configura√ß√µes do frontend (desenvolvimento)
# - env.example          -> Este arquivo (exemplo para produ√ß√£o)
#
# Para produ√ß√£o, configure as vari√°veis no Dokploy/Coolify

# ===========================================
# BACKEND CONFIGURATION (src/backend/.env)
# ===========================================
# 
# ‚ö†Ô∏è  IMPORTANTE: Este projeto possui dados em produ√ß√£o!
# üö´ NUNCA execute opera√ß√µes destrutivas sem backup
# ‚úÖ SEMPRE use npm run db:safe-migrate para migra√ß√µes
# üìö Leia: docs/DATABASE_SAFETY_GUIDELINES.md

# Database
DATABASE_SCHEMA=fitness
DATABASE_URL=postgres://postgres:fDuFw3jLOjC6BxBfdX0Iuec9nKZu64Xeity5RpKj5g5kDqP6PKX7E4Y3rqyYwFvO@132.145.206.169:5432/postgres?schema=fitness&sslmode=disable
DATABASE_HOST=132.145.206.169
DATABASE_PORT=5432
DATABASE_NAME=postgres
DATABASE_USER=postgres
DATABASE_PASSWORD=fDuFw3jLOjC6BxBfdX0Iuec9nKZu64Xeity5RpKj5g5kDqP6PKX7E4Y3rqyYwFvO


# Redis
REDIS_URL=redis://default:OIvRfsM009CW4Y6VZ7zPkrxPOXALEZlQi0u0tsH8Uj8thQxVplnxT5Eca9o5oVAE@132.145.206.169:6379/0
REDIS_HOST=129.213.36.229
REDIS_PORT=6379
REDIS_PASSWORD=OIvRfsM009CW4Y6VZ7zPkrxPOXALEZlQi0u0tsH8Uj8thQxVplnxT5Eca9o5oVAE
REDIS_DB=0

# Redis Cache Configuration
REDIS_CACHE_TTL_DEFAULT=1800  # 30 minutos
REDIS_CACHE_TTL_ANALYTICS=3600  # 1 hora
REDIS_CACHE_TTL_EXERCISES=3600  # 1 hora
REDIS_CACHE_TTL_SESSION=86400  # 24 horas

# Redis Performance
REDIS_MAX_MEMORY=256mb
REDIS_MAX_MEMORY_POLICY=allkeys-lru
REDIS_KEY_PREFIX=fitos:

# Feature Flags
ENABLE_REDIS_CACHE=true
ENABLE_REDIS_SESSION=true
ENABLE_REDIS_PUBSUB=true
ENABLE_CACHE_WARMING=true

# Monitoring
REDIS_MONITOR_ENABLED=true
CACHE_HIT_RATIO_ALERT=0.7

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-dev
JWT_ACCESS_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=fitos
JWT_AUDIENCE=fitos-app

# Session Configuration
SESSION_INACTIVITY_TIMEOUT=3600000
SESSION_CLEANUP_INTERVAL=3600000

# Email
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-dev-email@gmail.com
EMAIL_PASS=your-dev-app-password
EMAIL_FROM=your-dev-email@gmail.com

# CORS (desenvolvimento + produ√ß√£o)
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,https://yourdomain.com

# Server
PORT_BACKEND=3001
PORT_FRONTEND=3000
NODE_ENV=development

# Multi-tenant
DEFAULT_DOMAIN=localhost:3000
SUBDOMAIN_PATTERN=*.localhost:3000
DEFAULT_TENANT_ID=default-tenant

# Better Auth (OBRIGAT√ìRIAS)
BETTER_AUTH_BASE_URL=http://localhost:3001
BETTER_AUTH_SECRET=your-super-secret-better-auth-key-minimum-32-characters-dev
TRUSTED_ORIGINS=http://localhost:3000,http://localhost:3001,https://yourdomain.com

# Development flags
ENABLE_DEBUG_LOGS=true
ENABLE_SWAGGER=true
ENABLE_GRAPHQL_PLAYGROUND=true

# ===========================================
# GOOGLE CALENDAR OAUTH
# ===========================================
GOOGLE_OAUTH_ID=your-google-oauth-client-id.apps.googleusercontent.com
GOOGLE_OAUTH_SECRET=your-google-oauth-client-secret
GOOGLE_REDIRECT_URI=http://localhost:3000/api/google-calendar/callback

# ===========================================
# WHATSAPP BUSINESS API
# ===========================================
WHATSAPP_PROVIDER=twilio
WHATSAPP_PHONE_NUMBER=+1234567890
WHATSAPP_API_KEY=your-twilio-account-sid
WHATSAPP_API_SECRET=your-twilio-auth-token
WHATSAPP_WEBHOOK_URL=https://yourdomain.com/api/webhooks/whatsapp

# ===========================================
# SMS SERVICE (OPCIONAL)
# ===========================================
SMS_PROVIDER=twilio
SMS_ACCOUNT_SID=your-twilio-account-sid
SMS_AUTH_TOKEN=your-twilio-auth-token
SMS_FROM_NUMBER=+1234567890

# ===========================================
# FILE STORAGE
# ===========================================
STORAGE_PROVIDER=cloudinary
# Cloudinary (RECOMENDADO)
CLOUDINARY_URL=cloudinary://your-api-key:your-api-secret@your-cloud-name
CLOUDINARY_CLOUD_NAME=your-cloud-name
CLOUDINARY_API_KEY=your-api-key
CLOUDINARY_API_SECRET=your-api-secret
# Para S3:
# S3_BUCKET=your-bucket-name
# S3_REGION=us-east-1
# S3_ACCESS_KEY_ID=your-access-key
# S3_SECRET_ACCESS_KEY=your-secret-key
# Para MinIO:
# MINIO_ENDPOINT=http://localhost:9000
# MINIO_ACCESS_KEY=minioadmin
# MINIO_SECRET_KEY=minioadmin123
# MINIO_BUCKET=fitos

# ===========================================
# COST MANAGEMENT
# ===========================================
COST_REDIS_CACHE_ENABLED=true
COST_CACHE_TTL=3600
COST_ALERT_EMAIL_ENABLED=true
COST_REPORT_SCHEDULE_ENABLED=true
COST_DEFAULT_CURRENCY=BRL
COST_ALERT_WARNING_THRESHOLD=75
COST_ALERT_CRITICAL_THRESHOLD=90

# ===========================================
# COST TRACKING - REDIS CACHE (TTLs espec√≠ficos por categoria)
# ===========================================
# Nota: REDIS_KEY_PREFIX=fitos: j√° existe, usar para costs como: fitos:costs:
COST_CACHE_TTL_CLOUDINARY=7200         # 2 horas (mais tempo que o default)
COST_CACHE_TTL_DATABASE=1800           # 30 minutos
COST_CACHE_TTL_DASHBOARD=300           # 5 minutos (menor que o default)

# ===========================================
# COST TRACKING - PRICING (sem hardcode)
# ===========================================
COST_DATABASE_PER_GB=0.10              # USD por GB/m√™s
COST_CLOUDINARY_FREE_CREDITS=25        # Cr√©ditos gr√°tis/m√™s
COST_CLOUDINARY_PER_CREDIT=0.0018      # USD por cr√©dito extra
COST_BANDWIDTH_PER_GB=0.08             # USD por GB bandwidth
COST_AI_GPT4_INPUT_PER_1K=0.03         # USD por 1k tokens input
COST_AI_GPT4_OUTPUT_PER_1K=0.06        # USD por 1k tokens output
COST_AI_GPT35_INPUT_PER_1K=0.001       # USD por 1k tokens input
COST_AI_GPT35_OUTPUT_PER_1K=0.002      # USD por 1k tokens output
COST_AI_CLAUDE_INPUT_PER_1K=0.003      # USD por 1k tokens input
COST_AI_CLAUDE_OUTPUT_PER_1K=0.015     # USD por 1k tokens output

# ===========================================
# AI PROVIDERS (MOCK para desenvolvimento)
# ===========================================
OPENAI_API_KEY=sk-mock-development-key
OPENAI_ORGANIZATION_ID=org-mock-development
ANTHROPIC_API_KEY=sk-ant-mock-development
GOOGLE_AI_API_KEY=mock-google-ai-development

# ===========================================
# AWS COST TRACKING (MOCK, desabilitado)
# ===========================================
AWS_ACCESS_KEY_ID=MOCK_DEV_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=mock_dev_secret_key
AWS_REGION=us-east-1
AWS_COST_EXPLORER_ENABLED=false
AWS_S3_BUCKET=mock-bucket-name

# ===========================================
# STRIPE & MERCADO PAGO (MOCK)
# ===========================================
STRIPE_SECRET_KEY=sk_test_mock_development
STRIPE_WEBHOOK_SECRET=whsec_mock_development
MERCADOPAGO_ACCESS_TOKEN=APP_USR_mock_development
COST_STRIPE_FEE_PERCENTAGE=2.9         # %
COST_STRIPE_FEE_FIXED=0.30             # USD
COST_MERCADOPAGO_PIX_FEE=2.99          # %
COST_MERCADOPAGO_CARD_FEE=3.99         # %

# ===========================================
# COST TRACKING - AUTOMATION
# ===========================================
COST_TRACKING_ENABLED=true
COST_TRACKING_INTERVAL=3600000         # 1 hora (ms)
COST_AUTO_SYNC_CLOUDINARY=true
COST_AUTO_SYNC_AWS=false               # Desabilitado em dev
COST_AUTO_SYNC_DATABASE=true
COST_PREDICTIVE_ANALYSIS_ENABLED=true
COST_ANOMALY_DETECTION_THRESHOLD=30    # % de varia√ß√£o

# ===========================================
# COST TRACKING - NOTIFICATIONS
# ===========================================
COST_ALERT_EMAIL_TO=your-dev-email@gmail.com
COST_REPORT_SCHEDULE_CRON=0 0 * * 0    # Todo domingo √†s 00:00

# ===========================================
# WEBHOOKS RATE LIMITING
# ===========================================
WEBHOOK_RATE_LIMIT=100                 # Max requests por IP por minuto
RATE_LIMIT_WINDOW=60                   # Janela em segundos

# ===========================================
# NOTIFICATION CHANNELS (GRATUITAS)
# ===========================================
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK
CUSTOM_WEBHOOK_URL=https://your-custom-webhook.com/endpoint

# ===========================================
# CURRENCY CONVERSION (GRATUITA)
# ===========================================
CURRENCY_CONVERSION_ENABLED=true
CURRENCY_API_URL=https://api.exchangerate-api.com/v4/latest/USD
CURRENCY_CACHE_TTL=3600                # 1 hora

# ===========================================
# ADMIN CACHE TTL CONFIGURATION
# ===========================================
CACHE_TTL_SYSTEM_HEALTH_OVERVIEW=30           # 30 segundos
CACHE_TTL_SYSTEM_HEALTH_SERVICES=60           # 1 minuto
CACHE_TTL_SYSTEM_HEALTH_METRICS=300           # 5 minutos
CACHE_TTL_SYSTEM_HEALTH_ALERTS=10             # 10 segundos
CACHE_TTL_SYSTEM_HEALTH_HISTORY=3600          # 1 hora
CACHE_TTL_USER_ANALYTICS_OVERVIEW=300         # 5 minutos
CACHE_TTL_USER_ANALYTICS_ENGAGEMENT=3600      # 1 hora
CACHE_TTL_USER_ANALYTICS_RETENTION=86400      # 24 horas
CACHE_TTL_USER_ANALYTICS_FEATURES=1800        # 30 minutos
CACHE_TTL_USER_ANALYTICS_SESSIONS=300         # 5 minutos
CACHE_TTL_BILLING_OVERVIEW=300                # 5 minutos
CACHE_TTL_BILLING_MRR_ARR=3600                # 1 hora
CACHE_TTL_BILLING_ISSUES=60                   # 1 minuto
CACHE_TTL_BILLING_FORECASTING=86400           # 24 horas
CACHE_TTL_BILLING_PAYMENT_METHODS=3600        # 1 hora

# ===========================================
# FRONTEND CONFIGURATION (src/frontend/.env.local)
# ===========================================

# API
NEXT_PUBLIC_API_URL=http://localhost:3001

# Session Configuration (Frontend)
NEXT_PUBLIC_SESSION_TIMEOUT=3600000
NEXT_PUBLIC_ACTIVITY_PING_INTERVAL=300000
NEXT_PUBLIC_INACTIVITY_WARNING=300000

# App
NEXT_PUBLIC_APP_NAME=FitOS
NEXT_PUBLIC_APP_VERSION=1.0.0

# Environment
NODE_ENV=development

# ===========================================
# SPRINT 6: INTEGRA√á√ïES EXTERNAS
# ===========================================

# ZOOM API - Video Conferencing
ZOOM_API_KEY=your-zoom-api-key-dev
ZOOM_API_SECRET=your-zoom-api-secret-dev
ZOOM_WEBHOOK_SECRET=your-webhook-secret-dev

# GOOGLE MEET API - Video Conferencing
GOOGLE_MEET_CLIENT_ID=your-google-client-id-dev
GOOGLE_MEET_CLIENT_SECRET=your-google-client-secret-dev
GOOGLE_MEET_REDIRECT_URI=http://localhost:3001/api/auth/google-meet/callback

# MICROSOFT TEAMS API - Video Conferencing
TEAMS_CLIENT_ID=your-teams-client-id-dev
TEAMS_CLIENT_SECRET=your-teams-client-secret-dev
TEAMS_TENANT_ID=your-microsoft-tenant-id-dev
TEAMS_REDIRECT_URI=http://localhost:3001/api/auth/teams/callback

# SPOTIFY API - Music Integration
SPOTIFY_CLIENT_ID=your-spotify-client-id-dev
SPOTIFY_CLIENT_SECRET=your-spotify-client-secret-dev
SPOTIFY_REDIRECT_URI=http://localhost:3001/api/auth/spotify/callback
SPOTIFY_SCOPES=user-read-private,user-read-email,playlist-read-private,playlist-read-collaborative,user-top-read

# ===========================================
# PRODUCTION OVERRIDES (Dokploy/Coolify)
# ===========================================
# Para produ√ß√£o, configure estas vari√°veis no seu provedor de deploy:

# NODE_ENV=production
# NEXT_PUBLIC_API_URL=https://yourdomain.com
# BETTER_AUTH_BASE_URL=https://yourdomain.com
# TRUSTED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
# CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
# DEFAULT_DOMAIN=yourdomain.com
# SUBDOMAIN_PATTERN=*.yourdomain.com
